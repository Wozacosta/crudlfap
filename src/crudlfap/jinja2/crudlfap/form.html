{% extends 'base.html' %}

{% block form_open %}
  <div style="max-width: 600px; margin: 0 auto">
{% endblock %}

{% block content %}
  {% if view.object_list|default([])|length %}
  <ul class="collection">
    {% for object in view.object_list %}
    <li class="collection-item">{{ object }}</li>
    {% endfor %}
  </ul>
  {% endif %}

  {% if view.invalid_pks|default(0) %}
  <div class="orange">
      <span class="">{{ _('Objects ignored because of missing authorization') }}: {{ view.invalid_pks }}</span>
  </div>
  {% endif %}

  {{ ryzom('crudlfap.components.form.Form', view.form, view) }}
{% endblock %}

{% block buttons %}
<style>
mwc-textfield {
  padding: 20px 0;
  display: block !important;
}
mwc-formfield {
  display: block !important;
}
</style>
<div class="hide-in-modal">
    <mwc-button
        form="form"
        data-controller="form"
        data-action="click->form#triggerSubmit"
        raised>
      {{ view.title_submit }}
    </mwc-button>
</div>
{% endblock %}

{% block form_close %}
{% if request.META.get('HTTP_X_MODAL') %}
<mwc-button
  form="form"
  id="primary-action-button"
  data-controller="form"
  data-action="click->form#triggerSubmit"
  raised
  slot="primaryAction">
  {{ view.title_submit }}
</mwc-button>
<mwc-button
  form="form"
  slot="secondaryAction"
  dialogAction="close"
>
  {{ _('cancel') }}
</mwc-button>
{% endif %}
</div>
{% endblock %}
